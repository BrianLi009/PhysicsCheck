#!/bin/bash
#SBATCH --account=def-vganesh
#SBATCH --time=30:00:00
#SBATCH --mem-per-cpu=4G
#SBATCH --array=0-999


n=$1 #n
f=$2 #cnf file name
c=$3 #current directory (of org instance)
t=$4 #number of simps conflicts

current_dir=${c}_no_pseudo
echo $current_dir
mkdir -p random_cube_testing
mkdir -p random_cube_testing/$current_dir
mkdir -p random_cube_testing/$current_dir/$n-solve random_cube_testing/$current_dir/simp


files=$(ls $c/$n-cubes/*.cubes)
highest_num=$(echo "$files" | awk -F '[./]' '{print $(NF-1)}' | sort -nr | head -n 1)
#echo $highest_num
cube_file=$c/$n-cubes/$highest_num.cubes
cp $(echo $cube_file) .

echo ${cube_file}
declare -a arr=("48" "72" "175" "250" "261" "272" "276" "552" "626" "672" "673" "743" "815" "882" "897" "906" "941" "1084" "1099" "1135" "1166" "1177" "1402" "1451" "1457" "1485" "1486" "1502" "1585" "1597" "1603" "1608" "1674" "1739" "1756" "1759" "1904" "2075" "2149" "2151" "2197" "2202" "2242" "2252" "2298" "2335" "2424" "2505" "2514" "2538" "2586" "2605" "2685" "2702" "2716" "2727" "2773" "2923" "2959" "2977" "3080" "3228" "3270" "3476" "3485" "3529" "3650" "3734" "3796" "3833" "3897" "3977" "4067" "4108" "4171" "4188" "4199" "4338" "4342" "4409" "4412" "4427" "4438" "4462" "4468" "4471" "4574" "4591" "4667" "4768" "4858" "4953" "5007" "5061" "5076" "5234" "5541" "5594" "5628" "5646" "5690" "5694" "5727" "5788" "5791" "5803" "5884" "5944" "5949" "6011" "6281" "6282" "6410" "6492" "6576" "6611" "6733" "6781" "6977" "7116" "7137" "7189" "7245" "7478" "7519" "7554" "7559" "7575" "7643" "7674" "7676" "7680" "7782" "7814" "7935" "8088" "8136" "8194" "8329" "8336" "8418" "8506" "8628" "8631" "8663" "8702" "8715" "8760" "8849" "9009" "9081" "9194" "9241" "9253" "9439" "9455" "9464" "9565" "9645" "9725" "9727" "9765" "9779" "9809" "9811" "9844" "9867" "10006" "10146" "10258" "10345" "10394" "10611" "10633" "10727" "10797" "10821" "10827" "10830" "10903" "10960" "11004" "11021" "11023" "11051" "11070" "11079" "11234" "11240" "11350" "11377" "11392" "11396" "11397" "11441" "11475" "11636" "11673" "11703" "11758" "11813" "11837" "12033" "12075" "12111" "12114" "12157" "12264" "12385" "12398" "12409" "12454" "12483" "12545" "12631" "12705" "12873" "13026" "13041" "13082" "13215" "13243" "13248" "13293" "13298" "13310" "13451" "13548" "13649" "13672" "13690" "13706" "13769" "13790" "13793" "14030" "14081" "14109" "14131" "14148" "14246" "14259" "14331" "14346" "14358" "14429" "14430" "14556" "14586" "14604" "14622" "14671" "14687" "14755" "14772" "14775" "14807" "14925" "14999" "15008" "15014" "15065" "15292" "15353" "15372" "15454" "15847" "15891" "15907" "15908" "15936" "15953" "15999" "16095" "16163" "16558" "16597" "16614" "16745" "16882" "16919" "17171" "17193" "17256" "17324" "17394" "17440" "17515" "17531" "17536" "17707" "17729" "17794" "17801" "17931" "17977" "17990" "18133" "18314" "18340" "18388" "18395" "18399" "18505" "18561" "18590" "18811" "18832" "18833" "18893" "18936" "18968" "19138" "19216" "19277" "19309" "19438" "19476" "19481" "19593" "19626" "19671" "19678" "19701" "19791" "19830" "19931" "19987" "20012" "20061" "20063" "20222" "20286" "20434" "20467" "20541" "20719" "20772" "20893" "21071" "21083" "21173" "21185" "21267" "21419" "21465" "21492" "21551" "21563" "21657" "21662" "21697" "21718" "21828" "21839" "21856" "21902" "21903" "21924" "21952" "22002" "22012" "22021" "22053" "22061" "22242" "22290" "22336" "22441" "22474" "22570" "22690" "22713" "22747" "22794" "22853" "23005" "23250" "23296" "23309" "23335" "23369" "23393" "23510" "23523" "23614" "23653" "23711" "23792" "23831" "23856" "23976" "23989" "24009" "24047" "24076" "24086" "24347" "24403" "24420" "24451" "24579" "24788" "24961" "24986" "24998" "25121" "25139" "25170" "25195" "25216" "25225" "25286" "25391" "25555" "25558" "25574" "25602" "25724" "25835" "25949" "25955" "26021" "26061" "26078" "26087" "26175" "26191" "26329" "26484" "26590" "26595" "26675" "26842" "26892" "26936" "26991" "27067" "27096" "27246" "27250" "27371" "27626" "27656" "27768" "27878" "27889" "27967" "28130" "28215" "28267" "28400" "28425" "28533" "28573" "28597" "28676" "28760" "28777" "28793" "28811" "28909" "28948" "28999" "29018" "29043" "29165" "29227" "29307" "29365" "29381" "29410" "29555" "29557" "29600" "29601" "29656" "29740" "29781" "29784" "29822" "29824" "29890" "29891" "29924" "30087" "30463" "30466" "30538" "30658" "30755" "30818" "30932" "30941" "30958" "30985" "31050" "31096" "31097" "31139" "31162" "31210" "31248" "31281" "31355" "31452" "31536" "31544" "31554" "31610" "31874" "32003" "32196" "32224" "32303" "32400" "32404" "32473" "32484" "32774" "32989" "33030" "33142" "33184" "33213" "33222" "33232" "33310" "33380" "33411" "33429" "33484" "33529" "33573" "33669" "33683" "33770" "33782" "33974" "33988" "34024" "34050" "34066" "34084" "34153" "34318" "34328" "34330" "34529" "34657" "34663" "34678" "34717" "34745" "34760" "34831" "34906" "34918" "34930" "34948" "34977" "34983" "35135" "35137" "35149" "35158" "35174" "35220" "35264" "35353" "35598" "35665" "35727" "35741" "35798" "35837" "35899" "35979" "36055" "36181" "36198" "36286" "36356" "36382" "36431" "36495" "36518" "36611" "36636" "36666" "36702" "36724" "36830" "36993" "36994" "37071" "37132" "37191" "37196" "37493" "37638" "37699" "37710" "37852" "37919" "37950" "37982" "37991" "38068" "38078" "38184" "38231" "38249" "38291" "38312" "38376" "38531" "38558" "38596" "38599" "38648" "38801" "38809" "38851" "38858" "38902" "38970" "39070" "39118" "39339" "39342" "39392" "39395" "39414" "39445" "39470" "39540" "39618" "39632" "39802" "39854" "39926" "40056" "40105" "40149" "40152" "40199" "40272" "40424" "40521" "40686" "40737" "40841" "40916" "40941" "41016" "41106" "41232" "41376" "41378" "41428" "41517" "41701" "41721" "41808" "41812" "41819" "42206" "42221" "42286" "42289" "42337" "42377" "42500" "42538" "42566" "42796" "42940" "42967" "43059" "43073" "43115" "43124" "43202" "43220" "43286" "43289" "43342" "43384" "43519" "43529" "43544" "43620" "43689" "43711" "43743" "43759" "43767" "43796" "43822" "43952" "43967" "43988" "44089" "44263" "44295" "44301" "44313" "44350" "44436" "44647" "44663" "44670" "44743" "44762" "44793" "44847" "44957" "45012" "45082" "45136" "45175" "45259" "45386" "45418" "45684" "45703" "45777" "45820" "45854" "45888" "45985" "46180" "46187" "46213" "46277" "46302" "46353" "46372" "46449" "46582" "46769" "46774" "46806" "46811" "46824" "46849" "46946" "47002" "47005" "47012" "47108" "47186" "47250" "47275" "47280" "47481" "47540" "47565" "47575" "47618" "47636" "47693" "47726" "47758" "47792" "47801" "47831" "47845" "47875" "47885" "47899" "47924" "47947" "48094" "48134" "48176" "48259" "48273" "48301" "48322" "48432" "48450" "48453" "48458" "48552" "48558" "48618" "48687" "48765" "48853" "48867" "48881" "48917" "48942" "48970" "48995" "49019" "49070" "49076" "49112" "49150" "49151" "49240" "49259" "49320" "49362" "49378" "49604" "49618" "49720" "49823" "49839" "49856" "49868" "49872" "49925" "49945" "49971" "50023" "50035" "50039" "50066" "50272" "50332" "50407" "50463" "50562" "50575" "50607" "50761" "50941" "51200" "51217" "51282" "51440" "51519" "51523" "51583" "51590" "51596" "51615" "51672" "51829" "51838" "51885" "51922" "51937" "51941" "52035" "52037" "52068" "52069" "52151" "52173" "52206" "52217" "52269" "52296" "52303" "52309" "52376" "52490" "52499" "52517" "52569" "52634" "52638" "52751" "52810" "52887" "52924" "52970" "52971" "53247" "53435" "53539" "53677" "53720" "53765" "53772" "53806" "53818" "53882" "53885" "53905" "54042" "54114" "54137" "54163" "54393" "54456" "54463" "54583" "54652" "54716" "54766" "54802" "54947" "54953" "54974" "55278" "55303" "55325" "55369" "55404" "55431" "55457" "55516" "55767" "55793" "55828" "55834" "55961" "55976" "55980" "56074" "56137" "56273" "56341" "56386" "56463" "56476" "56713" "56717" "56853" "57022" "57086" "57192" "57278" "57316" "57371" "57387" "57424" "57484" "57532" "57822" "58018" "58095" "58111" "58160" "58180" "58334" "58337" "58377" "58508" "58567" "58570" "58702" "58715" "58765" "58772" "58831" "58862" "58933" "58969" "59183" "59193" "59205" "59232" "59257" "59263" "59322" "59441" "59545" "59704" "59747" "59974" "59989" "60087" "60093" "60103" "60249" "60307" "60437" "60454" "60518" "60539" "60559" "60668" "60728" "61044" "61096" "61125" "61130" "61180" "61218" "61274" "61283" "61325" "61405" "61410" "61526" "61548" "61563" "61570" "61583" "61638" "61664" "61690")
./random_test_sub.sh $n $f $c ${cube_file} $t ${arr[${SLURM_ARRAY_TASK_ID}]}
